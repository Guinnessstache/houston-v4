{"remainingRequest":"/Users/stevannesovic/Sites/node-interface/node_modules/babel-loader/lib/index.js!/Users/stevannesovic/Sites/node-interface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/stevannesovic/Sites/node-interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stevannesovic/Sites/node-interface/src/components/DepositTokens.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stevannesovic/Sites/node-interface/src/components/DepositTokens.vue","mtime":1553095967732},{"path":"/Users/stevannesovic/Sites/node-interface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stevannesovic/Sites/node-interface/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/stevannesovic/Sites/node-interface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stevannesovic/Sites/node-interface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/stevannesovic/Sites/node-interface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: ['profileAddress', 'tokenAddress', 'erc725'],\n  mounted: function mounted() {\n    var _this = this;\n\n    window.eth.accounts().then(function (result) {\n      _this.wallet = result[0];\n    });\n    window.EventBus.$on('management_wallet_changed', function (managementWallet) {\n      _this.wallet = managementWallet;\n    });\n  },\n  data: function data() {\n    return {\n      amount: 0,\n      wallet: ''\n    };\n  },\n  methods: {\n    increaseApproval: function increaseApproval() {\n      var _this2 = this;\n\n      this.$alert('This operation will require 2 transactions to blockchain.', 'Important', {\n        confirmButtonText: 'OK',\n        callback: function callback() {\n          var tokenContract = window.eth.contract(window.tokenAbi).at(_this2.tokenAddress);\n          tokenContract.increaseApproval(_this2.profileAddress, _this2.prepareNumber(), {\n            from: _this2.wallet\n          }).then(\n          /*#__PURE__*/\n          function () {\n            var _ref = _asyncToGenerator(\n            /*#__PURE__*/\n            regeneratorRuntime.mark(function _callee(hash) {\n              return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      window.EventBus.$emit('loading', 'First transaction in progress. Please wait.');\n                      _context.next = 3;\n                      return window.Utilities.getTransactionReceipt(hash);\n\n                    case 3:\n                      window.EventBus.$emit('loading-done');\n                      window.EventBus.$emit('loading', 'Please approve second transaction');\n\n                      _this2.depositToken();\n\n                    case 6:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee, this);\n            }));\n\n            return function (_x) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n        }\n      });\n    },\n    depositToken: function depositToken() {\n      var profileContract = window.eth.contract(window.profileAbi).at(this.profileAddress);\n      profileContract.depositTokens(this.erc725, this.prepareNumber(), {\n        from: this.wallet\n      }).then(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        regeneratorRuntime.mark(function _callee2(hash) {\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  window.EventBus.$emit('loading', 'Second transaction in progress. Please wait.');\n                  _context2.next = 3;\n                  return window.Utilities.getTransactionReceipt(hash);\n\n                case 3:\n                  window.EventBus.$emit('loading-done');\n\n                case 4:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    },\n    prepareNumber: function prepareNumber() {\n      var am = new window.Eth.BN(this.amount * 1000);\n      var base = new window.Eth.BN(10);\n      var exponent = new window.Eth.BN(15);\n      var multiply = base.pow(exponent);\n      return am.mul(multiply);\n    }\n  }\n};",{"version":3,"sources":["DepositTokens.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"panel\">\n    <h1>Deposit TRAC <el-popover\n      placement=\"top-start\"\n      title=\"Deposit TRAC\"\n      width=\"300\"\n      trigger=\"hover\"\n      content=\"For the node to operate within the rules of the OriginTrail protocol, your node needs TRAC on it's network profile smart contract. This TRAC is used to reimburse DH nodes for their services (if you are publishing data sets as a DC node), to provide collateral (stake) as a DH node, and to provide the initial stake to join the network. Your node might from time to time respond to holding requests, which might lock in additional TRAC if it gets picked for the job (you can observe the available TRAC in the left sidebar), which will get unlocked once the job is completed. For each job, your node will be compensated in additional TRAC, which will be shown on your profile once the job is complete.\">\n      <i class=\"el-icon-info\" slot=\"reference\"></i>\n    </el-popover></h1>\n    <span>Deposit TRAC to your Profile</span>\n    <el-form>\n      <el-form-item label=\"Wallet to deposit from - Management wallet\">\n        <el-input v-model=\"wallet\" :disabled=\"true\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Please enter amount to deposit\">\n        <el-input-number v-model=\"amount\" :precision=\"3\" :step=\"0.01\" :min=\"0\"></el-input-number>\n      </el-form-item>\n      <el-button @click=\"increaseApproval\">Deposit Tokens</el-button>\n    </el-form>\n  </div>\n</template>\n<script>\nexport default {\n  props: ['profileAddress', 'tokenAddress', 'erc725'],\n  mounted() {\n    window.eth.accounts().then((result) => {\n      this.wallet = result[0];\n    });\n\n    window.EventBus.$on('management_wallet_changed', (managementWallet) => {\n      this.wallet = managementWallet;\n    });\n  },\n  data() {\n    return {\n      amount: 0,\n      wallet: '',\n    };\n  },\n  methods: {\n    increaseApproval() {\n      this.$alert('This operation will require 2 transactions to blockchain.', 'Important', {\n        confirmButtonText: 'OK',\n        callback: () => {\n          const tokenContract = window.eth.contract(window.tokenAbi).at(this.tokenAddress);\n          tokenContract.increaseApproval(this.profileAddress, this.prepareNumber(),\n            { from: this.wallet })\n            .then(async (hash) => {\n              window.EventBus.$emit('loading', 'First transaction in progress. Please wait.');\n              await window.Utilities.getTransactionReceipt(hash);\n              window.EventBus.$emit('loading-done');\n              window.EventBus.$emit('loading', 'Please approve second transaction');\n              this.depositToken();\n            });\n        },\n      });\n    },\n    depositToken() {\n      const profileContract = window.eth.contract(window.profileAbi).at(this.profileAddress);\n      profileContract.depositTokens(this.erc725, this.prepareNumber(),\n        { from: this.wallet })\n        .then(async (hash) => {\n          window.EventBus.$emit('loading', 'Second transaction in progress. Please wait.');\n          await window.Utilities.getTransactionReceipt(hash);\n          window.EventBus.$emit('loading-done');\n        });\n    },\n    prepareNumber() {\n      const am = new window.Eth.BN(this.amount * 1000);\n      const base = new window.Eth.BN(10);\n      const exponent = new window.Eth.BN(15);\n      const multiply = base.pow(exponent);\n      return am.mul(multiply);\n    },\n  },\n};\n</script>\n<style>\n\n</style>\n"],"sourceRoot":"src/components"}]}