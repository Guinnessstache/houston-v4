{"remainingRequest":"/Users/davidaleksic/Sites/houston-v4/node_modules/thread-loader/dist/cjs.js!/Users/davidaleksic/Sites/houston-v4/node_modules/babel-loader/lib/index.js!/Users/davidaleksic/Sites/houston-v4/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/davidaleksic/Sites/houston-v4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/davidaleksic/Sites/houston-v4/src/components/ManageWallets.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/davidaleksic/Sites/houston-v4/src/components/ManageWallets.vue","mtime":1577116137886},{"path":"/Users/davidaleksic/Sites/houston-v4/node_modules/cache-loader/dist/cjs.js","mtime":1577116124352},{"path":"/Users/davidaleksic/Sites/houston-v4/node_modules/thread-loader/dist/cjs.js","mtime":1577116128649},{"path":"/Users/davidaleksic/Sites/houston-v4/node_modules/babel-loader/lib/index.js","mtime":1577116124172},{"path":"/Users/davidaleksic/Sites/houston-v4/node_modules/cache-loader/dist/cjs.js","mtime":1577116124352},{"path":"/Users/davidaleksic/Sites/houston-v4/node_modules/vue-loader/lib/index.js","mtime":1577116128818}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/davidaleksic/Sites/houston-v4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: ['erc725'],\n  mounted: function mounted() {\n    var _this = this;\n\n    window.eth.accounts().then(function (result) {\n      _this.wallet = result[0];\n    });\n  },\n  data: function data() {\n    return {\n      options: [{\n        value: 'mv',\n        label: 'Management Wallet'\n      }, {\n        value: 'ov',\n        label: 'Operational Wallet'\n      }],\n      selected_wallet_type: 'mv',\n      walletToAdd: '',\n      wallet: ''\n    };\n  },\n  methods: {\n    add: function add() {\n      var _this2 = this;\n\n      var ercContract = window.eth.contract(window.erc725Abi).at(this.erc725);\n      var arr = this.selected_wallet_type === 'mv' ? [1, 2, 3, 4] : [2, 4];\n      var keccakContract = window.eth.contract(window.keccakAbi).at(window.keccakAddress);\n      keccakContract.keccakAddress(this.walletToAdd).then(function (walletToAdd) {\n        ercContract.addKey(walletToAdd[0], arr, 1, {\n          from: _this2.wallet\n        }).then(\n        /*#__PURE__*/\n        function () {\n          var _ref = _asyncToGenerator(\n          /*#__PURE__*/\n          regeneratorRuntime.mark(function _callee(hash) {\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    window.EventBus.$emit('loading');\n                    _context.next = 3;\n                    return window.Utilities.getTransactionReceipt(hash);\n\n                  case 3:\n                    window.EventBus.$emit('loading-done');\n\n                  case 4:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      });\n    },\n    remove: function remove() {\n      var _this3 = this;\n\n      var ercContract = window.eth.contract(window.erc725Abi).at(this.erc725);\n      var keccakContract = window.eth.contract(window.keccakAbi).at(window.keccakAddress);\n      keccakContract.keccakAddress(this.walletToAdd).then(function (walletToRemove) {\n        console.log(walletToRemove, 'wallet to remove');\n        ercContract.removeKey(walletToRemove['0'], {\n          from: _this3.wallet\n        }).then(\n        /*#__PURE__*/\n        function () {\n          var _ref2 = _asyncToGenerator(\n          /*#__PURE__*/\n          regeneratorRuntime.mark(function _callee2(hash) {\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    window.EventBus.$emit('loading');\n                    _context2.next = 3;\n                    return window.Utilities.getTransactionReceipt(hash);\n\n                  case 3:\n                    window.EventBus.$emit('loading-done');\n\n                  case 4:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, this);\n          }));\n\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }());\n      });\n    }\n  }\n};",{"version":3,"sources":["ManageWallets.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"panel\">\n    <h1>Manage Wallets<el-popover\n      placement=\"top-start\"\n      title=\"Manage wallets\"\n      width=\"500\"\n      trigger=\"hover\"\n      content=\"The OriginTrail node identity is compatible with the ERC725 standard and utilizes it for key management.\n\nIt distinguishes two different types of keys in the identity contract:\n- The operational wallet, whose private key is stored on the node itself and is used to perform a multitude of operations in the ODN (signing, execution, etc). It requires a small balance of ETH in order to be able to publish transactions to the blockchain, and it can be filled periodically. No TRAC tokens are required for this wallet\n- The management wallet, whose private key is NOT stored on the node and is used to deal with the funds (TRAC rewards) and to manage the keys associated with the ERC725 identity. The management wallet can be any ERC20 supporting wallet (Trezor, Ledger, Metamask etc).\nThis approach is taken as a convenience measure to provide for flexibility with key management and to minimize the risk of loosing funds in case of the operational key stored on the node somehow gets compromised.\nYou can use this interface to manage your wallets (add/remove both). IMPORTANT NOTE: Only use this interface if you know what you are doing! With improper use, your node can stop operating and you can loose your rewards!\">\n      <i class=\"el-icon-info\" slot=\"reference\"></i>\n    </el-popover></h1>\n    <span>Add/Remove wallets (Management & Operational)</span>\n    <p>Note: You cannot remove a management wallet if you only have one associated with to your node. To change your existing management wallet, first add a new one, and then proceed with removing the old wallet.</p>\n    <el-form>\n      <el-form-item>\n        <p class=\"label-p\">Wallet Type to Manage:</p>\n        <el-select style=\"width: 100%\" v-model=\"selected_wallet_type\" placeholder=\"Select\" clearable>\n          <el-option\n                  v-for=\"item in options\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <p class=\"label-p\">Enter Wallet:</p>\n        <el-input v-model=\"walletToAdd\"></el-input>\n      </el-form-item>\n\n      <el-button style=\"width: 47%\" class=\"houston-btn\" @click=\"add\">ADD WALLET</el-button>\n      <el-button style=\"width: 47%\" class=\"\" @click=\"remove\">REMOVE WALLET</el-button>\n    </el-form>\n\n  </div>\n</template>\n<script>\nexport default {\n  props: ['erc725'],\n  mounted() {\n    window.eth.accounts().then((result) => {\n      this.wallet = result[0];\n    });\n  },\n  data() {\n    return {\n      options: [\n        { value: 'mv', label: 'Management Wallet' },\n        { value: 'ov', label: 'Operational Wallet' },\n      ],\n      selected_wallet_type: 'mv',\n      walletToAdd: '',\n      wallet: '',\n    };\n  },\n  methods: {\n    add() {\n      const ercContract = window.eth.contract(window.erc725Abi).at(this.erc725);\n      const arr = (this.selected_wallet_type === 'mv') ? [1, 2, 3, 4] : [2, 4];\n      const keccakContract = window.eth.contract(window.keccakAbi).at(window.keccakAddress);\n      keccakContract.keccakAddress(this.walletToAdd)\n        .then((walletToAdd) => {\n          ercContract.addKey(walletToAdd[0], arr, 1,\n            { from: this.wallet })\n            .then(async (hash) => {\n              window.EventBus.$emit('loading');\n              await window.Utilities.getTransactionReceipt(hash);\n              window.EventBus.$emit('loading-done');\n            });\n        });\n    },\n    remove() {\n      const ercContract = window.eth.contract(window.erc725Abi).at(this.erc725);\n      const keccakContract = window.eth.contract(window.keccakAbi).at(window.keccakAddress);\n      keccakContract.keccakAddress(this.walletToAdd)\n        .then((walletToRemove) => {\n          console.log(walletToRemove, 'wallet to remove');\n          ercContract.removeKey(walletToRemove['0'],\n            { from: this.wallet })\n            .then(async (hash) => {\n              window.EventBus.$emit('loading');\n              await window.Utilities.getTransactionReceipt(hash);\n              window.EventBus.$emit('loading-done');\n            });\n        });\n    },\n  },\n};\n</script>\n<style>\n  .full {\n    width: 100%;\n  }\n\n  .el-select-dropdown__item {\n    font-family: 'Roboto', Arial, sans-serif;\n  }\n</style>\n"],"sourceRoot":"src/components"}]}